(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TSNE = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(r){var e=new Procedure;e.pre=r.pre,e.body=r.body,e.post=r.post;var s=r.args.slice(0);e.argTypes=s;for(var o=0;o<s.length;++o){var a=s[o];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[o]="array",e.arrayArgs.push(o),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(o),e.shimArgs.push("scalar"+o);else if("index"===a){if(e.indexArgs.push(o),o<e.pre.args.length&&e.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<e.post.args.length&&e.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(o),o<e.pre.args.length&&e.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<e.body.args.length&&e.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<e.post.args.length&&e.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+s[o]);e.argTypes[o]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(o)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>s.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>s.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>s.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!r.printCode||!!r.debug,e.funcName=r.funcName||"cwise",e.blockSize=r.blockSize||64,createThunk(e)}var createThunk=require("./lib/thunk.js");module.exports=compileCwise;
},{"./lib/thunk.js":3}],2:[function(require,module,exports){
"use strict";function innerFill(r,n,e){var s,a,o=r.length,i=n.arrayArgs.length,t=n.indexArgs.length>0,h=[],p=[],u=0,c=0;for(s=0;s<o;++s)p.push(["i",s,"=0"].join(""));for(a=0;a<i;++a)for(s=0;s<o;++s)c=u,u=r[s],0===s?p.push(["d",a,"s",s,"=t",a,"p",u].join("")):p.push(["d",a,"s",s,"=(t",a,"p",u,"-s",c,"*t",a,"p",c,")"].join(""));for(p.length>0&&h.push("var "+p.join(",")),s=o-1;s>=0;--s)u=r[s],h.push(["for(i",s,"=0;i",s,"<s",u,";++i",s,"){"].join(""));for(h.push(e),s=0;s<o;++s){for(c=u,u=r[s],a=0;a<i;++a)h.push(["p",a,"+=d",a,"s",s].join(""));t&&(s>0&&h.push(["index[",c,"]-=s",c].join("")),h.push(["++index[",u,"]"].join(""))),h.push("}")}return h.join("\n")}function outerFill(r,n,e,s){for(var a=n.length,o=e.arrayArgs.length,i=e.blockSize,t=e.indexArgs.length>0,h=[],p=0;p<o;++p)h.push(["var offset",p,"=p",p].join(""));for(var p=r;p<a;++p)h.push(["for(var j"+p+"=SS[",n[p],"]|0;j",p,">0;){"].join("")),h.push(["if(j",p,"<",i,"){"].join("")),h.push(["s",n[p],"=j",p].join("")),h.push(["j",p,"=0"].join("")),h.push(["}else{s",n[p],"=",i].join("")),h.push(["j",p,"-=",i,"}"].join("")),t&&h.push(["index[",n[p],"]=j",p].join(""));for(var p=0;p<o;++p){for(var u=["offset"+p],c=r;c<a;++c)u.push(["j",c,"*t",p,"p",n[c]].join(""));h.push(["p",p,"=(",u.join("+"),")"].join(""))}h.push(innerFill(n,e,s));for(var p=r;p<a;++p)h.push("}");return h.join("\n")}function countMatches(r){for(var n=0,e=r[0].length;n<e;){for(var s=1;s<r.length;++s)if(r[s][n]!==r[0][n])return n;++n}return n}function processBlock(r,n,e){for(var s=r.body,a=[],o=[],i=0;i<r.args.length;++i){var t=r.args[i];if(!(t.count<=0)){var h=new RegExp(t.name,"g"),p="",u=n.arrayArgs.indexOf(i);switch(n.argTypes[i]){case"offset":var c=n.offsetArgIndex.indexOf(i);u=n.offsetArgs[c].array,p="+q"+c;case"array":p="p"+u+p;var l="l"+i,f="a"+u;if(0===n.arrayBlockIndices[u])1===t.count?"generic"===e[u]?t.lvalue?(a.push(["var ",l,"=",f,".get(",p,")"].join("")),s=s.replace(h,l),o.push([f,".set(",p,",",l,")"].join(""))):s=s.replace(h,[f,".get(",p,")"].join("")):s=s.replace(h,[f,"[",p,"]"].join("")):"generic"===e[u]?(a.push(["var ",l,"=",f,".get(",p,")"].join("")),s=s.replace(h,l),t.lvalue&&o.push([f,".set(",p,",",l,")"].join(""))):(a.push(["var ",l,"=",f,"[",p,"]"].join("")),s=s.replace(h,l),t.lvalue&&o.push([f,"[",p,"]=",l].join("")));else{for(var g=[t.name],j=[p],v=0;v<Math.abs(n.arrayBlockIndices[u]);v++)g.push("\\s*\\[([^\\]]+)\\]"),j.push("$"+(v+1)+"*t"+u+"b"+v);if(h=new RegExp(g.join(""),"g"),p=j.join("+"),"generic"===e[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");s=s.replace(h,[f,"[",p,"]"].join(""))}break;case"scalar":s=s.replace(h,"Y"+n.scalarArgs.indexOf(i));break;case"index":s=s.replace(h,"index");break;case"shape":s=s.replace(h,"shape")}}}return[a.join("\n"),s,o.join("\n")].join("\n").trim()}function typeSummary(r){for(var n=new Array(r.length),e=!0,s=0;s<r.length;++s){var a=r[s],o=a.match(/\d+/);o=o?o[0]:"",0===a.charAt(0)?n[s]="u"+a.charAt(1)+o:n[s]=a.charAt(0)+o,s>0&&(e=e&&n[s]===n[s-1])}return e?n[0]:n.join("")}function generateCWiseOp(r,n){for(var e=n[1].length-Math.abs(r.arrayBlockIndices[0])|0,s=new Array(r.arrayArgs.length),a=new Array(r.arrayArgs.length),o=0;o<r.arrayArgs.length;++o)a[o]=n[2*o],s[o]=n[2*o+1];for(var i=[],t=[],h=[],p=[],u=[],o=0;o<r.arrayArgs.length;++o){r.arrayBlockIndices[o]<0?(h.push(0),p.push(e),i.push(e),t.push(e+r.arrayBlockIndices[o])):(h.push(r.arrayBlockIndices[o]),p.push(r.arrayBlockIndices[o]+e),i.push(0),t.push(r.arrayBlockIndices[o]));for(var c=[],l=0;l<s[o].length;l++)h[o]<=s[o][l]&&s[o][l]<p[o]&&c.push(s[o][l]-h[o]);u.push(c)}for(var f=["SS"],g=["'use strict'"],j=[],l=0;l<e;++l)j.push(["s",l,"=SS[",l,"]"].join(""));for(var o=0;o<r.arrayArgs.length;++o){f.push("a"+o),f.push("t"+o),f.push("p"+o);for(var l=0;l<e;++l)j.push(["t",o,"p",l,"=t",o,"[",h[o]+l,"]"].join(""));for(var l=0;l<Math.abs(r.arrayBlockIndices[o]);++l)j.push(["t",o,"b",l,"=t",o,"[",i[o]+l,"]"].join(""))}for(var o=0;o<r.scalarArgs.length;++o)f.push("Y"+o);if(r.shapeArgs.length>0&&j.push("shape=SS.slice(0)"),r.indexArgs.length>0){for(var v=new Array(e),o=0;o<e;++o)v[o]="0";j.push(["index=[",v.join(","),"]"].join(""))}for(var o=0;o<r.offsetArgs.length;++o){for(var y=r.offsetArgs[o],d=[],l=0;l<y.offset.length;++l)0!==y.offset[l]&&(1===y.offset[l]?d.push(["t",y.array,"p",l].join("")):d.push([y.offset[l],"*t",y.array,"p",l].join("")));0===d.length?j.push("q"+o+"=0"):j.push(["q",o,"=",d.join("+")].join(""))}var A=uniq([].concat(r.pre.thisVars).concat(r.body.thisVars).concat(r.post.thisVars));j=j.concat(A),j.length>0&&g.push("var "+j.join(","));for(var o=0;o<r.arrayArgs.length;++o)g.push("p"+o+"|=0");r.pre.body.length>3&&g.push(processBlock(r.pre,r,a));var k=processBlock(r.body,r,a),b=countMatches(u);b<e?g.push(outerFill(b,u[0],r,k)):g.push(innerFill(u[0],r,k)),r.post.body.length>3&&g.push(processBlock(r.post,r,a)),r.debug&&console.log("-----Generated cwise routine for ",n,":\n"+g.join("\n")+"\n----------");var x=[r.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",b,typeSummary(a)].join("");return new Function(["function ",x,"(",f.join(","),"){",g.join("\n"),"} return ",x].join(""))()}var uniq=require("uniq");module.exports=generateCWiseOp;
},{"uniq":17}],3:[function(require,module,exports){
"use strict";function createThunk(r){var a=["'use strict'","var CACHED={}"],e=[],s=r.funcName+"_cwise_thunk";a.push(["return function ",s,"(",r.shimArgs.join(","),"){"].join(""));for(var n=[],o=[],h=[["array",r.arrayArgs[0],".shape.slice(",Math.max(0,r.arrayBlockIndices[0]),r.arrayBlockIndices[0]<0?","+r.arrayBlockIndices[0]+")":")"].join("")],i=[],p=[],t=0;t<r.arrayArgs.length;++t){var c=r.arrayArgs[t];e.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),n.push("t"+c),n.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),h.push("array"+c+".data"),h.push("array"+c+".stride"),h.push("array"+c+".offset|0"),t>0&&(i.push("array"+r.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(r.arrayBlockIndices[0])-Math.abs(r.arrayBlockIndices[t]))),p.push("array"+r.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,r.arrayBlockIndices[t])+"]"))}r.arrayArgs.length>1&&(a.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),a.push("for(var shapeIndex=array"+r.arrayArgs[0]+".shape.length-"+Math.abs(r.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),a.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),a.push("}"));for(var t=0;t<r.scalarArgs.length;++t)h.push("scalar"+r.scalarArgs[t]);return e.push(["type=[",o.join(","),"].join()"].join("")),e.push("proc=CACHED[type]"),a.push("var "+e.join(",")),a.push(["if(!proc){","CACHED[type]=proc=compile([",n.join(","),"])}","return proc(",h.join(","),")}"].join("")),r.debug&&console.log("-----Generated thunk:\n"+a.join("\n")+"\n----------"),new Function("compile",a.join("\n"))(compile.bind(void 0,r))}var compile=require("./compile.js");module.exports=createThunk;
},{"./compile.js":2}],4:[function(require,module,exports){
(function (global){(function (){
"use strict";function CompiledArgument(e,r,n){this.name=e,this.lvalue=r,this.rvalue=n,this.count=0}function CompiledRoutine(e,r,n,t){this.body=e,this.args=r,this.thisVars=n,this.localVars=t}function isGlobal(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?e in window:"undefined"!=typeof global?e in global:"undefined"!=typeof self&&e in self}function getArgNames(e){for(var r=e.body[0].expression.callee.params,n=new Array(r.length),t=0;t<r.length;++t)n[t]=r[t].name;return n}function preprocess(e){function r(e){var r=p+e.replace(/\_/g,"__");return h.push(r),r}function n(e){var r="this_"+e.replace(/\_/g,"__");return y.push(r),r}function t(e,r){for(var n=e.range[0],t=e.range[1],i=n+1;i<t;++i)c[i]="";c[n]=r}function i(e){return"'"+e.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function o(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?d:d|m:"UpdateExpression"===e.parent.type?d|m:m}for(var a=["(",e,")()"].join(""),s=esprima.parse(a,{range:!0}),p="_inline_"+PREFIX_COUNTER+++"_",l=getArgNames(s),u=new Array(l.length),f=0;f<l.length;++f)u[f]=new CompiledArgument([p,"arg",f,"_"].join(""),!1,!1);for(var c=new Array(a.length),f=0,g=a.length;f<g;++f)c[f]=a.charAt(f);var h=[],y=[],d=1,m=2;return function e(a,s){if(a.parent=s,"MemberExpression"===a.type)a.computed?(e(a.object,a),e(a.property,a)):"ThisExpression"===a.object.type?t(a,n(a.property.name)):e(a.object,a);else{if("ThisExpression"===a.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===a.type){var p=a.name,f=l.indexOf(p);if(f>=0){var c=u[f],g=o(a);g&d&&(c.lvalue=!0),g&m&&(c.rvalue=!0),++c.count,t(a,c.name)}else isGlobal(p)||t(a,r(p))}else if("Literal"===a.type)"string"==typeof a.value&&t(a,i(a.value));else{if("WithStatement"===a.type)throw new Error("cwise-parser: with() statements not allowed");for(var h=Object.keys(a),y=0,v=h.length;y<v;++y)if("parent"!==h[y]){var w=a[h[y]];if(w)if(w instanceof Array)for(var b=0;b<w.length;++b)w[b]&&"string"==typeof w[b].type&&e(w[b],a);else"string"==typeof w.type&&e(w,a)}}}}(s.body[0].expression.callee.body,void 0),uniq(h),uniq(y),new CompiledRoutine(function(e){return c.slice(e.range[0],e.range[1]).join("")}(s.body[0].expression.callee.body),u,y,h)}var esprima=require("esprima"),uniq=require("uniq"),PREFIX_COUNTER=0;module.exports=preprocess;
}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"esprima":8,"uniq":17}],5:[function(require,module,exports){
"use strict";function createCWise(e){for(var r in e)REQUIRED_FIELDS.indexOf(r)<0&&OPTIONAL_FIELDS.indexOf(r)<0&&console.warn("cwise: Unknown argument '"+r+"' passed to expression compiler");for(var o=0;o<REQUIRED_FIELDS.length;++o)if(!e[REQUIRED_FIELDS[o]])throw new Error("cwise: Missing argument: "+REQUIRED_FIELDS[o]);return compile({args:e.args,pre:parse(e.pre||function(){}),body:parse(e.body),post:parse(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}var parse=require("cwise-parser"),compile=require("cwise-compiler"),REQUIRED_FIELDS=["args","body"],OPTIONAL_FIELDS=["pre","post","printCode","funcName","blockSize"];module.exports=createCWise;
},{"cwise-compiler":1,"cwise-parser":4}],6:[function(require,module,exports){
module.exports=require("cwise-compiler");
},{"cwise-compiler":1}],7:[function(require,module,exports){
"use strict";function dupe_array(r,e,u){var n=0|r[u];if(n<=0)return[];var t,a=new Array(n);if(u===r.length-1)for(t=0;t<n;++t)a[t]=e;else for(t=0;t<n;++t)a[t]=dupe_array(r,e,u+1);return a}function dupe_number(r,e){var u,n;for(u=new Array(r),n=0;n<r;++n)u[n]=e;return u}function dupe(r,e){switch(void 0===e&&(e=0),typeof r){case"number":if(r>0)return dupe_number(0|r,e);break;case"object":if("number"==typeof r.length)return dupe_array(r,e,0)}return[]}module.exports=dupe;
},{}],8:[function(require,module,exports){
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof exports?exports:e.esprima={})}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function n(e){return e>=48&&e<=57}function r(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function a(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function o(e){return 10===e||13===e||8232===e||8233===e}function c(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&it.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function l(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&it.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function u(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function s(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function m(e){return"eval"===e||"arguments"===e}function d(e){if(lt&&s(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function p(e,n,r,a,i){var o;t("number"==typeof r,"Comment must have valid position"),ht.lastCommentStart>=r||(ht.lastCommentStart=r,o={type:e,value:n},yt.range&&(o.range=[r,a]),yt.loc&&(o.loc=i),yt.comments.push(o),yt.attachComment&&(yt.leadingComments.push(o),yt.trailingComments.push(o)))}function f(e){var t,n,r,a;for(t=ut-e,n={start:{line:st,column:ut-mt-e}};ut<dt;)if(r=ct.charCodeAt(ut),++ut,o(r))return yt.comments&&(a=ct.slice(t+e,ut-1),n.end={line:st,column:ut-mt-1},p("Line",a,t,ut-1,n)),13===r&&10===ct.charCodeAt(ut)&&++ut,++st,void(mt=ut);yt.comments&&(a=ct.slice(t+e,ut),n.end={line:st,column:ut-mt},p("Line",a,t,ut,n))}function h(){var e,t,n,r;for(yt.comments&&(e=ut-2,t={start:{line:st,column:ut-mt-2}});ut<dt;)if(n=ct.charCodeAt(ut),o(n))13===n&&10===ct.charCodeAt(ut+1)&&++ut,++st,++ut,mt=ut,ut>=dt&&K({},at.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===ct.charCodeAt(ut+1))return++ut,++ut,void(yt.comments&&(r=ct.slice(e+2,ut-2),t.end={line:st,column:ut-mt},p("Block",r,e,ut,t)));++ut}else++ut;K({},at.UnexpectedToken,"ILLEGAL")}function y(){var e,t;for(t=0===ut;ut<dt;)if(e=ct.charCodeAt(ut),i(e))++ut;else if(o(e))++ut,13===e&&10===ct.charCodeAt(ut)&&++ut,++st,mt=ut,t=!0;else if(47===e)if(47===(e=ct.charCodeAt(ut+1)))++ut,++ut,f(2),t=!0;else{if(42!==e)break;++ut,++ut,h()}else if(t&&45===e){if(45!==ct.charCodeAt(ut+1)||62!==ct.charCodeAt(ut+2))break;ut+=3,f(3)}else{if(60!==e)break;if("!--"!==ct.slice(ut+1,ut+4))break;++ut,++ut,++ut,++ut,f(4)}}function S(e){var t,n,a,i=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(ut<dt&&r(ct[ut])))return"";a=ct[ut++],i=16*i+"0123456789abcdef".indexOf(a.toLowerCase())}return String.fromCharCode(i)}function v(){var e,t;for(e=ct.charCodeAt(ut++),t=String.fromCharCode(e),92===e&&(117!==ct.charCodeAt(ut)&&K({},at.UnexpectedToken,"ILLEGAL"),++ut,e=S("u"),e&&"\\"!==e&&c(e.charCodeAt(0))||K({},at.UnexpectedToken,"ILLEGAL"),t=e);ut<dt&&(e=ct.charCodeAt(ut),l(e));)++ut,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==ct.charCodeAt(ut)&&K({},at.UnexpectedToken,"ILLEGAL"),++ut,e=S("u"),e&&"\\"!==e&&l(e.charCodeAt(0))||K({},at.UnexpectedToken,"ILLEGAL"),t+=e);return t}function g(){var e,t;for(e=ut++;ut<dt;){if(92===(t=ct.charCodeAt(ut)))return ut=e,v();if(!l(t))break;++ut}return ct.slice(e,ut)}function k(){var e,t,n;return e=ut,t=92===ct.charCodeAt(ut)?v():g(),n=1===t.length?_e.Identifier:d(t)?_e.Keyword:"null"===t?_e.NullLiteral:"true"===t||"false"===t?_e.BooleanLiteral:_e.Identifier,{type:n,value:t,lineNumber:st,lineStart:mt,start:e,end:ut}}function b(){var e,t,n,r,a=ut,i=ct.charCodeAt(ut),o=ct[ut];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ut,yt.tokenize&&(40===i?yt.openParenToken=yt.tokens.length:123===i&&(yt.openCurlyToken=yt.tokens.length)),{type:_e.Punctuator,value:String.fromCharCode(i),lineNumber:st,lineStart:mt,start:a,end:ut};default:if(61===(e=ct.charCodeAt(ut+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ut+=2,{type:_e.Punctuator,value:String.fromCharCode(i)+String.fromCharCode(e),lineNumber:st,lineStart:mt,start:a,end:ut};case 33:case 61:return ut+=2,61===ct.charCodeAt(ut)&&++ut,{type:_e.Punctuator,value:ct.slice(a,ut),lineNumber:st,lineStart:mt,start:a,end:ut}}}return">>>="===(r=ct.substr(ut,4))?(ut+=4,{type:_e.Punctuator,value:r,lineNumber:st,lineStart:mt,start:a,end:ut}):">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?(ut+=3,{type:_e.Punctuator,value:n,lineNumber:st,lineStart:mt,start:a,end:ut}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(ut+=2,{type:_e.Punctuator,value:t,lineNumber:st,lineStart:mt,start:a,end:ut}):"<>=!+-*%&|^/".indexOf(o)>=0?(++ut,{type:_e.Punctuator,value:o,lineNumber:st,lineStart:mt,start:a,end:ut}):void K({},at.UnexpectedToken,"ILLEGAL"))}function E(e){for(var t="";ut<dt&&r(ct[ut]);)t+=ct[ut++];return 0===t.length&&K({},at.UnexpectedToken,"ILLEGAL"),c(ct.charCodeAt(ut))&&K({},at.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:st,lineStart:mt,start:e,end:ut}}function x(e){for(var t="0"+ct[ut++];ut<dt&&a(ct[ut]);)t+=ct[ut++];return(c(ct.charCodeAt(ut))||n(ct.charCodeAt(ut)))&&K({},at.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseInt(t,8),octal:!0,lineNumber:st,lineStart:mt,start:e,end:ut}}function C(){var e,t;for(e=ut+1;e<dt;++e){if("8"===(t=ct[e])||"9"===t)return!1;if(!a(t))return!0}return!0}function w(){var e,r,i;if(i=ct[ut],t(n(i.charCodeAt(0))||"."===i,"Numeric literal must start with a decimal digit or a decimal point"),r=ut,e="","."!==i){if(e=ct[ut++],i=ct[ut],"0"===e){if("x"===i||"X"===i)return++ut,E(r);if(a(i)&&C())return x(r)}for(;n(ct.charCodeAt(ut));)e+=ct[ut++];i=ct[ut]}if("."===i){for(e+=ct[ut++];n(ct.charCodeAt(ut));)e+=ct[ut++];i=ct[ut]}if("e"===i||"E"===i)if(e+=ct[ut++],i=ct[ut],"+"!==i&&"-"!==i||(e+=ct[ut++]),n(ct.charCodeAt(ut)))for(;n(ct.charCodeAt(ut));)e+=ct[ut++];else K({},at.UnexpectedToken,"ILLEGAL");return c(ct.charCodeAt(ut))&&K({},at.UnexpectedToken,"ILLEGAL"),{type:_e.NumericLiteral,value:parseFloat(e),lineNumber:st,lineStart:mt,start:r,end:ut}}function I(){var e,n,r,i,c,l,u,s,m="",d=!1;for(u=st,s=mt,e=ct[ut],t("'"===e||'"'===e,"String literal must starts with a quote"),n=ut,++ut;ut<dt;){if((r=ct[ut++])===e){e="";break}if("\\"===r)if((r=ct[ut++])&&o(r.charCodeAt(0)))++st,"\r"===r&&"\n"===ct[ut]&&++ut,mt=ut;else switch(r){case"u":case"x":l=ut,c=S(r),c?m+=c:(ut=l,m+=r);break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:a(r)?(i="01234567".indexOf(r),0!==i&&(d=!0),ut<dt&&a(ct[ut])&&(d=!0,i=8*i+"01234567".indexOf(ct[ut++]),"0123".indexOf(r)>=0&&ut<dt&&a(ct[ut])&&(i=8*i+"01234567".indexOf(ct[ut++]))),m+=String.fromCharCode(i)):m+=r}else{if(o(r.charCodeAt(0)))break;m+=r}}return""!==e&&K({},at.UnexpectedToken,"ILLEGAL"),{type:_e.StringLiteral,value:m,octal:d,startLineNumber:u,startLineStart:s,lineNumber:st,lineStart:mt,start:n,end:ut}}function L(e,t){var n;try{n=new RegExp(e,t)}catch(e){K({},at.InvalidRegExp)}return n}function A(){var e,n,r,a,i;for(e=ct[ut],t("/"===e,"Regular expression literal must start with a slash"),n=ct[ut++],r=!1,a=!1;ut<dt;)if(e=ct[ut++],n+=e,"\\"===e)e=ct[ut++],o(e.charCodeAt(0))&&K({},at.UnterminatedRegExp),n+=e;else if(o(e.charCodeAt(0)))K({},at.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){a=!0;break}"["===e&&(r=!0)}return a||K({},at.UnterminatedRegExp),i=n.substr(1,n.length-2),{value:i,literal:n}}function P(){var e,t,n,r;for(t="",n="";ut<dt&&(e=ct[ut],l(e.charCodeAt(0)));)if(++ut,"\\"===e&&ut<dt)if("u"===(e=ct[ut])){if(++ut,r=ut,e=S("u"))for(n+=e,t+="\\u";r<ut;++r)t+=ct[r];else ut=r,n+="u",t+="\\u";V({},at.UnexpectedToken,"ILLEGAL")}else t+="\\",V({},at.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function N(){var e,t,n,r;return ft=null,y(),e=ut,t=A(),n=P(),r=L(t.value,n.value),yt.tokenize?{type:_e.RegularExpression,value:r,lineNumber:st,lineStart:mt,start:e,end:ut}:{literal:t.literal+n.literal,value:r,start:e,end:ut}}function O(){var e,t,n,r;return y(),e=ut,t={start:{line:st,column:ut-mt}},n=N(),t.end={line:st,column:ut-mt},yt.tokenize||(yt.tokens.length>0&&(r=yt.tokens[yt.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||yt.tokens.pop())),yt.tokens.push({type:"RegularExpression",value:n.literal,range:[e,ut],loc:t})),n}function U(e){return e.type===_e.Identifier||e.type===_e.Keyword||e.type===_e.BooleanLiteral||e.type===_e.NullLiteral}function R(){var e,t;if(!(e=yt.tokens[yt.tokens.length-1]))return O();if("Punctuator"===e.type){if("]"===e.value)return b();if(")"===e.value)return t=yt.tokens[yt.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?b():O();if("}"===e.value){if(yt.tokens[yt.openCurlyToken-3]&&"Keyword"===yt.tokens[yt.openCurlyToken-3].type){if(!(t=yt.tokens[yt.openCurlyToken-4]))return b()}else{if(!yt.tokens[yt.openCurlyToken-4]||"Keyword"!==yt.tokens[yt.openCurlyToken-4].type)return b();if(!(t=yt.tokens[yt.openCurlyToken-5]))return O()}return tt.indexOf(t.value)>=0?b():O()}return O()}return"Keyword"===e.type&&"this"!==e.value?O():b()}function F(){var e;return y(),ut>=dt?{type:_e.EOF,lineNumber:st,lineStart:mt,start:ut,end:ut}:(e=ct.charCodeAt(ut),c(e)?k():40===e||41===e||59===e?b():39===e||34===e?I():46===e?n(ct.charCodeAt(ut+1))?w():b():n(e)?w():yt.tokenize&&47===e?R():b())}function T(){var e,t,n;return y(),e={start:{line:st,column:ut-mt}},t=F(),e.end={line:st,column:ut-mt},t.type!==_e.EOF&&(n=ct.slice(t.start,t.end),yt.tokens.push({type:et[t.type],value:n,range:[t.start,t.end],loc:e})),t}function D(){var e;return e=ft,ut=e.end,st=e.lineNumber,mt=e.lineStart,ft=void 0!==yt.tokens?T():F(),ut=e.end,st=e.lineNumber,mt=e.lineStart,e}function B(){var e,t,n;e=ut,t=st,n=mt,ft=void 0!==yt.tokens?T():F(),ut=e,st=t,mt=n}function W(e,t){this.line=e,this.column=t}function j(e,t,n,r){this.start=new W(e,t),this.end=new W(n,r)}function G(){var e,t,n,r;return e=ut,t=st,n=mt,y(),r=st!==t,ut=e,st=t,mt=n,r}function K(e,n){var r,a=Array.prototype.slice.call(arguments,2),i=n.replace(/%(\d)/g,function(e,n){return t(n<a.length,"Message reference must be in range"),a[n]});throw"number"==typeof e.lineNumber?(r=new Error("Line "+e.lineNumber+": "+i),r.index=e.start,r.lineNumber=e.lineNumber,r.column=e.start-mt+1):(r=new Error("Line "+st+": "+i),r.index=ut,r.lineNumber=st,r.column=ut-mt+1),r.description=i,r}function V(){try{K.apply(null,arguments)}catch(e){if(!yt.errors)throw e;yt.errors.push(e)}}function M(e){if(e.type===_e.EOF&&K(e,at.UnexpectedEOS),e.type===_e.NumericLiteral&&K(e,at.UnexpectedNumber),e.type===_e.StringLiteral&&K(e,at.UnexpectedString),e.type===_e.Identifier&&K(e,at.UnexpectedIdentifier),e.type===_e.Keyword){if(u(e.value))K(e,at.UnexpectedReserved);else if(lt&&s(e.value))return void V(e,at.StrictReservedWord);K(e,at.UnexpectedToken,e.value)}K(e,at.UnexpectedToken,e.value)}function H(e){var t=D();t.type===_e.Punctuator&&t.value===e||M(t)}function q(e){var t=D();t.type===_e.Keyword&&t.value===e||M(t)}function z(e){return ft.type===_e.Punctuator&&ft.value===e}function $(e){return ft.type===_e.Keyword&&ft.value===e}function X(){var e;return ft.type===_e.Punctuator&&("="===(e=ft.value)||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function J(){var e,t=ut,n=st,r=mt,a=ft;return 59===ct.charCodeAt(ut)||z(";")?void D():(e=st,y(),st!==e?(ut=t,st=n,mt=r,void(ft=a)):void(ft.type===_e.EOF||z("}")||M(ft)))}function Q(e){return e.type===nt.Identifier||e.type===nt.MemberExpression}function Y(){var e,t=[];for(e=ft,H("[");!z("]");)z(",")?(D(),t.push(null)):(t.push(ye()),z("]")||H(","));return D(),pt.markEnd(pt.createArrayExpression(t),e)}function Z(e,t){var n,r,a;return n=lt,a=ft,r=Me(),t&&lt&&m(e[0].name)&&V(t,at.StrictParamName),lt=n,pt.markEnd(pt.createFunctionExpression(null,e,[],r),a)}function _(){var e,t;return t=ft,e=D(),e.type===_e.StringLiteral||e.type===_e.NumericLiteral?(lt&&e.octal&&V(e,at.StrictOctalLiteral),pt.markEnd(pt.createLiteral(e),t)):pt.markEnd(pt.createIdentifier(e.value),t)}function ee(){var e,t,n,r,a,i;return e=ft,i=ft,e.type===_e.Identifier?(n=_(),"get"!==e.value||z(":")?"set"!==e.value||z(":")?(H(":"),r=ye(),pt.markEnd(pt.createProperty("init",n,r),i)):(t=_(),H("("),e=ft,e.type!==_e.Identifier?(H(")"),V(e,at.UnexpectedToken,e.value),r=Z([])):(a=[ke()],H(")"),r=Z(a,e)),pt.markEnd(pt.createProperty("set",t,r),i)):(t=_(),H("("),H(")"),r=Z([]),pt.markEnd(pt.createProperty("get",t,r),i))):e.type!==_e.EOF&&e.type!==_e.Punctuator?(t=_(),H(":"),r=ye(),pt.markEnd(pt.createProperty("init",t,r),i)):void M(e)}function te(){var e,t,n,r,a,i=[],o={},c=String;for(a=ft,H("{");!z("}");)e=ee(),t=e.key.type===nt.Identifier?e.key.name:c(e.key.value),r="init"===e.kind?rt.Data:"get"===e.kind?rt.Get:rt.Set,n="$"+t,Object.prototype.hasOwnProperty.call(o,n)?(o[n]===rt.Data?lt&&r===rt.Data?V({},at.StrictDuplicateProperty):r!==rt.Data&&V({},at.AccessorDataProperty):r===rt.Data?V({},at.AccessorDataProperty):o[n]&r&&V({},at.AccessorGetSet),o[n]|=r):o[n]=r,i.push(e),z("}")||H(",");return H("}"),pt.markEnd(pt.createObjectExpression(i),a)}function ne(){var e;return H("("),e=Se(),H(")"),e}function re(){var e,t,n,r;if(z("("))return ne();if(z("["))return Y();if(z("{"))return te();if(e=ft.type,r=ft,e===_e.Identifier)n=pt.createIdentifier(D().value);else if(e===_e.StringLiteral||e===_e.NumericLiteral)lt&&ft.octal&&V(ft,at.StrictOctalLiteral),n=pt.createLiteral(D());else if(e===_e.Keyword){if($("function"))return ze();$("this")?(D(),n=pt.createThisExpression()):M(D())}else e===_e.BooleanLiteral?(t=D(),t.value="true"===t.value,n=pt.createLiteral(t)):e===_e.NullLiteral?(t=D(),t.value=null,n=pt.createLiteral(t)):z("/")||z("/=")?(n=void 0!==yt.tokens?pt.createLiteral(O()):pt.createLiteral(N()),B()):M(D());return pt.markEnd(n,r)}function ae(){var e=[];if(H("("),!z(")"))for(;ut<dt&&(e.push(ye()),!z(")"));)H(",");return H(")"),e}function ie(){var e,t;return t=ft,e=D(),U(e)||M(e),pt.markEnd(pt.createIdentifier(e.value),t)}function oe(){return H("."),ie()}function ce(){var e;return H("["),e=Se(),H("]"),e}function le(){var e,t,n;return n=ft,q("new"),e=se(),t=z("(")?ae():[],pt.markEnd(pt.createNewExpression(e,t),n)}function ue(){var e,t,n,r,a=ht.allowIn;for(r=ft,ht.allowIn=!0,e=$("new")?le():re();;){if(z("."))n=oe(),e=pt.createMemberExpression(".",e,n);else if(z("("))t=ae(),e=pt.createCallExpression(e,t);else{if(!z("["))break;n=ce(),e=pt.createMemberExpression("[",e,n)}pt.markEnd(e,r)}return ht.allowIn=a,e}function se(){var e,n,r;for(t(ht.allowIn,"callee of new expression always allow in keyword."),r=ft,e=$("new")?le():re();z(".")||z("[");)z("[")?(n=ce(),e=pt.createMemberExpression("[",e,n)):(n=oe(),e=pt.createMemberExpression(".",e,n)),pt.markEnd(e,r);return e}function me(){var e,t,n=ft;return e=ue(),ft.type===_e.Punctuator&&(!z("++")&&!z("--")||G()||(lt&&e.type===nt.Identifier&&m(e.name)&&V({},at.StrictLHSPostfix),Q(e)||V({},at.InvalidLHSInAssignment),t=D(),e=pt.markEnd(pt.createPostfixExpression(t.value,e),n))),e}function de(){var e,t,n;return ft.type!==_e.Punctuator&&ft.type!==_e.Keyword?t=me():z("++")||z("--")?(n=ft,e=D(),t=de(),lt&&t.type===nt.Identifier&&m(t.name)&&V({},at.StrictLHSPrefix),Q(t)||V({},at.InvalidLHSInAssignment),t=pt.createUnaryExpression(e.value,t),t=pt.markEnd(t,n)):z("+")||z("-")||z("~")||z("!")?(n=ft,e=D(),t=de(),t=pt.createUnaryExpression(e.value,t),t=pt.markEnd(t,n)):$("delete")||$("void")||$("typeof")?(n=ft,e=D(),t=de(),t=pt.createUnaryExpression(e.value,t),t=pt.markEnd(t,n),lt&&"delete"===t.operator&&t.argument.type===nt.Identifier&&V({},at.StrictDelete)):t=me(),t}function pe(e,t){var n=0;if(e.type!==_e.Punctuator&&e.type!==_e.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function fe(){var e,t,n,r,a,i,o,c,l,u;if(e=ft,l=de(),r=ft,0===(a=pe(r,ht.allowIn)))return l;for(r.prec=a,D(),t=[e,ft],o=de(),i=[l,r,o];(a=pe(ft,ht.allowIn))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),c=i.pop().value,l=i.pop(),n=pt.createBinaryExpression(c,l,o),t.pop(),e=t[t.length-1],pt.markEnd(n,e),i.push(n);r=D(),r.prec=a,i.push(r),t.push(ft),n=de(),i.push(n)}for(u=i.length-1,n=i[u],t.pop();u>1;)n=pt.createBinaryExpression(i[u-1].value,i[u-2],n),u-=2,e=t.pop(),pt.markEnd(n,e);return n}function he(){var e,t,n,r,a;return a=ft,e=fe(),z("?")&&(D(),t=ht.allowIn,ht.allowIn=!0,n=ye(),ht.allowIn=t,H(":"),r=ye(),e=pt.createConditionalExpression(e,n,r),pt.markEnd(e,a)),e}function ye(){var e,t,n,r,a;return e=ft,a=ft,r=t=he(),X()&&(Q(t)||V({},at.InvalidLHSInAssignment),lt&&t.type===nt.Identifier&&m(t.name)&&V(e,at.StrictLHSAssignment),e=D(),n=ye(),r=pt.markEnd(pt.createAssignmentExpression(e.value,t,n),a)),r}function Se(){var e,t=ft;if(e=ye(),z(",")){for(e=pt.createSequenceExpression([e]);ut<dt&&z(",");)D(),e.expressions.push(ye());pt.markEnd(e,t)}return e}function ve(){for(var e,t=[];ut<dt&&!z("}")&&void 0!==(e=$e());)t.push(e);return t}function ge(){var e,t;return t=ft,H("{"),e=ve(),H("}"),pt.markEnd(pt.createBlockStatement(e),t)}function ke(){var e,t;return t=ft,e=D(),e.type!==_e.Identifier&&M(e),pt.markEnd(pt.createIdentifier(e.value),t)}function be(e){var t,n,r=null;return n=ft,t=ke(),lt&&m(t.name)&&V({},at.StrictVarName),"const"===e?(H("="),r=ye()):z("=")&&(D(),r=ye()),pt.markEnd(pt.createVariableDeclarator(t,r),n)}function Ee(e){var t=[];do{if(t.push(be(e)),!z(","))break;D()}while(ut<dt);return t}function xe(){var e;return q("var"),e=Ee(),J(),pt.createVariableDeclaration(e,"var")}function Ce(e){var t,n;return n=ft,q(e),t=Ee(e),J(),pt.markEnd(pt.createVariableDeclaration(t,e),n)}function we(){return H(";"),pt.createEmptyStatement()}function Ie(){var e=Se();return J(),pt.createExpressionStatement(e)}function Le(){var e,t,n;return q("if"),H("("),e=Se(),H(")"),t=Ve(),$("else")?(D(),n=Ve()):n=null,pt.createIfStatement(e,t,n)}function Ae(){var e,t,n;return q("do"),n=ht.inIteration,ht.inIteration=!0,e=Ve(),ht.inIteration=n,q("while"),H("("),t=Se(),H(")"),z(";")&&D(),pt.createDoWhileStatement(e,t)}function Pe(){var e,t,n;return q("while"),H("("),e=Se(),H(")"),n=ht.inIteration,ht.inIteration=!0,t=Ve(),ht.inIteration=n,pt.createWhileStatement(e,t)}function Ne(){var e,t,n;return n=ft,e=D(),t=Ee(),pt.markEnd(pt.createVariableDeclaration(t,e.value),n)}function Oe(){var e,t,n,r,a,i,o,c=ht.allowIn;return e=t=n=null,q("for"),H("("),z(";")?D():($("var")||$("let")?(ht.allowIn=!1,e=Ne(),ht.allowIn=c,1===e.declarations.length&&$("in")&&(D(),r=e,a=Se(),e=null)):(ht.allowIn=!1,e=Se(),ht.allowIn=c,$("in")&&(Q(e)||V({},at.InvalidLHSInForIn),D(),r=e,a=Se(),e=null)),void 0===r&&H(";")),void 0===r&&(z(";")||(t=Se()),H(";"),z(")")||(n=Se())),H(")"),o=ht.inIteration,ht.inIteration=!0,i=Ve(),ht.inIteration=o,void 0===r?pt.createForStatement(e,t,n,i):pt.createForInStatement(r,a,i)}function Ue(){var e,t=null;return q("continue"),59===ct.charCodeAt(ut)?(D(),ht.inIteration||K({},at.IllegalContinue),pt.createContinueStatement(null)):G()?(ht.inIteration||K({},at.IllegalContinue),pt.createContinueStatement(null)):(ft.type===_e.Identifier&&(t=ke(),e="$"+t.name,Object.prototype.hasOwnProperty.call(ht.labelSet,e)||K({},at.UnknownLabel,t.name)),J(),null!==t||ht.inIteration||K({},at.IllegalContinue),pt.createContinueStatement(t))}function Re(){var e,t=null;return q("break"),59===ct.charCodeAt(ut)?(D(),ht.inIteration||ht.inSwitch||K({},at.IllegalBreak),pt.createBreakStatement(null)):G()?(ht.inIteration||ht.inSwitch||K({},at.IllegalBreak),pt.createBreakStatement(null)):(ft.type===_e.Identifier&&(t=ke(),e="$"+t.name,Object.prototype.hasOwnProperty.call(ht.labelSet,e)||K({},at.UnknownLabel,t.name)),J(),null!==t||ht.inIteration||ht.inSwitch||K({},at.IllegalBreak),pt.createBreakStatement(t))}function Fe(){var e=null;return q("return"),ht.inFunctionBody||V({},at.IllegalReturn),32===ct.charCodeAt(ut)&&c(ct.charCodeAt(ut+1))?(e=Se(),J(),pt.createReturnStatement(e)):G()?pt.createReturnStatement(null):(z(";")||z("}")||ft.type===_e.EOF||(e=Se()),J(),pt.createReturnStatement(e))}function Te(){var e,t;return lt&&(y(),V({},at.StrictModeWith)),q("with"),H("("),e=Se(),H(")"),t=Ve(),pt.createWithStatement(e,t)}function De(){var e,t,n,r=[];for(n=ft,$("default")?(D(),e=null):(q("case"),e=Se()),H(":");ut<dt&&!(z("}")||$("default")||$("case"));)t=Ve(),r.push(t);return pt.markEnd(pt.createSwitchCase(e,r),n)}function Be(){var e,t,n,r,a;if(q("switch"),H("("),e=Se(),H(")"),H("{"),t=[],z("}"))return D(),pt.createSwitchStatement(e,t);for(r=ht.inSwitch,ht.inSwitch=!0,a=!1;ut<dt&&!z("}");)n=De(),null===n.test&&(a&&K({},at.MultipleDefaultsInSwitch),a=!0),t.push(n);return ht.inSwitch=r,H("}"),pt.createSwitchStatement(e,t)}function We(){var e;return q("throw"),G()&&K({},at.NewlineAfterThrow),e=Se(),J(),pt.createThrowStatement(e)}function je(){var e,t,n;return n=ft,q("catch"),H("("),z(")")&&M(ft),e=ke(),lt&&m(e.name)&&V({},at.StrictCatchVariable),H(")"),t=ge(),pt.markEnd(pt.createCatchClause(e,t),n)}function Ge(){var e,t=[],n=null;return q("try"),e=ge(),$("catch")&&t.push(je()),$("finally")&&(D(),n=ge()),0!==t.length||n||K({},at.NoCatchOrFinally),pt.createTryStatement(e,[],t,n)}function Ke(){return q("debugger"),J(),pt.createDebuggerStatement()}function Ve(){var e,t,n,r,a=ft.type;if(a===_e.EOF&&M(ft),a===_e.Punctuator&&"{"===ft.value)return ge();if(r=ft,a===_e.Punctuator)switch(ft.value){case";":return pt.markEnd(we(),r);case"(":return pt.markEnd(Ie(),r)}if(a===_e.Keyword)switch(ft.value){case"break":return pt.markEnd(Re(),r);case"continue":return pt.markEnd(Ue(),r);case"debugger":return pt.markEnd(Ke(),r);case"do":return pt.markEnd(Ae(),r);case"for":return pt.markEnd(Oe(),r);case"function":return pt.markEnd(qe(),r);case"if":return pt.markEnd(Le(),r);case"return":return pt.markEnd(Fe(),r);case"switch":return pt.markEnd(Be(),r);case"throw":return pt.markEnd(We(),r);case"try":return pt.markEnd(Ge(),r);case"var":return pt.markEnd(xe(),r);case"while":return pt.markEnd(Pe(),r);case"with":return pt.markEnd(Te(),r)}return e=Se(),e.type===nt.Identifier&&z(":")?(D(),n="$"+e.name,Object.prototype.hasOwnProperty.call(ht.labelSet,n)&&K({},at.Redeclaration,"Label",e.name),ht.labelSet[n]=!0,t=Ve(),delete ht.labelSet[n],pt.markEnd(pt.createLabeledStatement(e,t),r)):(J(),pt.markEnd(pt.createExpressionStatement(e),r))}function Me(){var e,t,n,r,a,i,o,c,l,u=[];for(l=ft,H("{");ut<dt&&ft.type===_e.StringLiteral&&(t=ft,e=$e(),u.push(e),e.expression.type===nt.Literal);)n=ct.slice(t.start+1,t.end-1),"use strict"===n?(lt=!0,r&&V(r,at.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(a=ht.labelSet,i=ht.inIteration,o=ht.inSwitch,c=ht.inFunctionBody,ht.labelSet={},ht.inIteration=!1,ht.inSwitch=!1,ht.inFunctionBody=!0;ut<dt&&!z("}")&&void 0!==(e=$e());)u.push(e);return H("}"),ht.labelSet=a,ht.inIteration=i,ht.inSwitch=o,ht.inFunctionBody=c,pt.markEnd(pt.createBlockStatement(u),l)}function He(e){var t,n,r,a,i,o,c=[];if(H("("),!z(")"))for(a={};ut<dt&&(n=ft,t=ke(),i="$"+n.value,lt?(m(n.value)&&(r=n,o=at.StrictParamName),Object.prototype.hasOwnProperty.call(a,i)&&(r=n,o=at.StrictParamDupe)):e||(m(n.value)?(e=n,o=at.StrictParamName):s(n.value)?(e=n,o=at.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,i)&&(e=n,o=at.StrictParamDupe)),c.push(t),a[i]=!0,!z(")"));)H(",");return H(")"),{params:c,stricted:r,firstRestricted:e,message:o}}function qe(){var e,t,n,r,a,i,o,c,l,u=[];return l=ft,q("function"),n=ft,e=ke(),lt?m(n.value)&&V(n,at.StrictFunctionName):m(n.value)?(i=n,o=at.StrictFunctionName):s(n.value)&&(i=n,o=at.StrictReservedWord),a=He(i),u=a.params,r=a.stricted,i=a.firstRestricted,a.message&&(o=a.message),c=lt,t=Me(),lt&&i&&K(i,o),lt&&r&&V(r,o),lt=c,pt.markEnd(pt.createFunctionDeclaration(e,u,[],t),l)}function ze(){var e,t,n,r,a,i,o,c,l=null,u=[];return c=ft,q("function"),z("(")||(e=ft,l=ke(),lt?m(e.value)&&V(e,at.StrictFunctionName):m(e.value)?(n=e,r=at.StrictFunctionName):s(e.value)&&(n=e,r=at.StrictReservedWord)),a=He(n),u=a.params,t=a.stricted,n=a.firstRestricted,a.message&&(r=a.message),o=lt,i=Me(),lt&&n&&K(n,r),lt&&t&&V(t,r),lt=o,pt.markEnd(pt.createFunctionExpression(l,u,[],i),c)}function $e(){if(ft.type===_e.Keyword)switch(ft.value){case"const":case"let":return Ce(ft.value);case"function":return qe();default:return Ve()}if(ft.type!==_e.EOF)return Ve()}function Xe(){for(var e,t,n,r,a=[];ut<dt&&(t=ft,t.type===_e.StringLiteral)&&(e=$e(),a.push(e),e.expression.type===nt.Literal);)n=ct.slice(t.start+1,t.end-1),"use strict"===n?(lt=!0,r&&V(r,at.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;ut<dt&&void 0!==(e=$e());)a.push(e);return a}function Je(){var e,t;return y(),B(),t=ft,lt=!1,e=Xe(),pt.markEnd(pt.createProgram(e),t)}function Qe(){var e,t,n,r=[];for(e=0;e<yt.tokens.length;++e)t=yt.tokens[e],n={type:t.type,value:t.value},yt.range&&(n.range=t.range),yt.loc&&(n.loc=t.loc),r.push(n);yt.tokens=r}function Ye(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),pt=ot,ct=e,ut=0,st=ct.length>0?1:0,mt=0,dt=ct.length,ft=null,ht={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},yt={},t=t||{},t.tokens=!0,yt.tokens=[],yt.tokenize=!0,yt.openParenToken=-1,yt.openCurlyToken=-1,yt.range="boolean"==typeof t.range&&t.range,yt.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(yt.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(yt.errors=[]);try{if(B(),ft.type===_e.EOF)return yt.tokens;for(D();ft.type!==_e.EOF;)try{D()}catch(e){if(ft,yt.errors){yt.errors.push(e);break}throw e}Qe(),r=yt.tokens,void 0!==yt.comments&&(r.comments=yt.comments),void 0!==yt.errors&&(r.errors=yt.errors)}catch(e){throw e}finally{yt={}}return r}function Ze(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),pt=ot,ct=e,ut=0,st=ct.length>0?1:0,mt=0,dt=ct.length,ft=null,ht={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},yt={},void 0!==t&&(yt.range="boolean"==typeof t.range&&t.range,yt.loc="boolean"==typeof t.loc&&t.loc,yt.attachComment="boolean"==typeof t.attachComment&&t.attachComment,yt.loc&&null!==t.source&&void 0!==t.source&&(yt.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(yt.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(yt.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(yt.errors=[]),yt.attachComment&&(yt.range=!0,yt.comments=[],yt.bottomRightStack=[],yt.trailingComments=[],yt.leadingComments=[]));try{n=Je(),void 0!==yt.comments&&(n.comments=yt.comments),void 0!==yt.tokens&&(Qe(),n.tokens=yt.tokens),void 0!==yt.errors&&(n.errors=yt.errors)}catch(e){throw e}finally{yt={}}return n}var _e,et,tt,nt,rt,at,it,ot,ct,lt,ut,st,mt,dt,pt,ft,ht,yt;_e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},et={},et[_e.BooleanLiteral]="Boolean",et[_e.EOF]="<end>",et[_e.Identifier]="Identifier",et[_e.Keyword]="Keyword",et[_e.NullLiteral]="Null",et[_e.NumericLiteral]="Numeric",et[_e.Punctuator]="Punctuator",et[_e.StringLiteral]="String",et[_e.RegularExpression]="RegularExpression",tt=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],nt={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},rt={Data:1,Get:2,Set:4},at={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},it={
NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},ot={name:"SyntaxTree",processComment:function(e){var t,n;if(!(e.type===nt.Program&&e.body.length>0)){for(yt.trailingComments.length>0?yt.trailingComments[0].range[0]>=e.range[1]?(n=yt.trailingComments,yt.trailingComments=[]):yt.trailingComments.length=0:yt.bottomRightStack.length>0&&yt.bottomRightStack[yt.bottomRightStack.length-1].trailingComments&&yt.bottomRightStack[yt.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(n=yt.bottomRightStack[yt.bottomRightStack.length-1].trailingComments,delete yt.bottomRightStack[yt.bottomRightStack.length-1].trailingComments);yt.bottomRightStack.length>0&&yt.bottomRightStack[yt.bottomRightStack.length-1].range[0]>=e.range[0];)t=yt.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):yt.leadingComments.length>0&&yt.leadingComments[yt.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=yt.leadingComments,yt.leadingComments=[]),n&&(e.trailingComments=n),yt.bottomRightStack.push(e)}},markEnd:function(e,t){return yt.range&&(e.range=[t.start,ut]),yt.loc&&(e.loc=new j(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),st,ut-mt),this.postProcess(e)),yt.attachComment&&this.processComment(e),e},postProcess:function(e){return yt.source&&(e.loc.source=yt.source),e},createArrayExpression:function(e){return{type:nt.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:nt.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){return{type:"||"===e||"&&"===e?nt.LogicalExpression:nt.BinaryExpression,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:nt.BlockStatement,body:e}},createBreakStatement:function(e){return{type:nt.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:nt.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:nt.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:nt.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:nt.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:nt.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:nt.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:nt.EmptyStatement}},createExpressionStatement:function(e){return{type:nt.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:nt.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:nt.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,r){return{type:nt.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,r){return{type:nt.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:nt.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:nt.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:nt.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:nt.Literal,value:e.value,raw:ct.slice(e.start,e.end)}},createMemberExpression:function(e,t,n){return{type:nt.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:nt.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:nt.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:nt.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:nt.Program,body:e}},createProperty:function(e,t,n){return{type:nt.Property,key:t,value:n,kind:e}},createReturnStatement:function(e){return{type:nt.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:nt.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:nt.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:nt.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:nt.ThisExpression}},createThrowStatement:function(e){return{type:nt.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:nt.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:nt.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:nt.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:nt.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:nt.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:nt.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:nt.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=Ye,e.parse=Ze,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in nt)nt.hasOwnProperty(e)&&(t[e]=nt[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()});
},{}],9:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,i,n,s,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(i=this._events[e],isUndefined(i))return!1;if(isFunction(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(isObject(i))for(s=Array.prototype.slice.call(arguments,1),o=i.slice(),n=o.length,r=0;r<n;r++)o[r].apply(this,s);return!0},EventEmitter.prototype.addListener=function(e,t){var i;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(i=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},EventEmitter.prototype.removeListener=function(e,t){var i,n,s,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],s=i.length,n=-1,i===t||isFunction(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(i)){for(r=s;r-- >0;)if(i[r]===t||i[r].listener&&i[r].listener===t){n=r;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],isFunction(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};
},{}],10:[function(require,module,exports){
"use strict";function iota(r){for(var t=new Array(r),o=0;o<r;++o)t[o]=o;return t}module.exports=iota;
},{}],11:[function(require,module,exports){
function isBuffer(f){return!!f.constructor&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f)}function isSlowBuffer(f){return"function"==typeof f.readFloatLE&&"function"==typeof f.slice&&isBuffer(f.slice(0,0))}module.exports=function(f){return null!=f&&(isBuffer(f)||isSlowBuffer(f)||!!f._isBuffer)};
},{}],12:[function(require,module,exports){
"use strict";function fixup(a){if(!a)return EmptyProc;for(var r=0;r<a.args.length;++r){var s=a.args[r];a.args[r]=0===r?{name:s,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:{name:s,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function pcompile(a){return compile({args:a.args,pre:fixup(a.pre),body:fixup(a.body),post:fixup(a.proc),funcName:a.funcName})}function makeOp(a){for(var r=[],s=0;s<a.args.length;++s)r.push("a"+s);return new Function("P",["return function ",a.funcName,"_ndarrayops(",r.join(","),") {P(",r.join(","),");return a0}"].join(""))(pcompile(a))}var compile=require("cwise-compiler"),EmptyProc={body:"",args:[],thisVars:[],localVars:[]},assign_ops={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in assign_ops){var r=assign_ops[a];exports[a]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:a+"eq"}),exports[a+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:a+"seq"})}}();var unary_ops={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in unary_ops){var r=unary_ops[a];exports[a]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:a}),exports[a+"eq"]=makeOp({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var binary_ops={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in binary_ops){var r=binary_ops[a];exports[a]=makeOp({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"s"]=makeOp({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"eq"]=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:a+"eq"}),exports[a+"seq"]=makeOp({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var math_unary=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<math_unary.length;++a){var r=math_unary[a];exports[r]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),exports[r+"eq"]=makeOp({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var math_comm=["max","min","atan2","pow"];!function(){for(var a=0;a<math_comm.length;++a){var r=math_comm[a];exports[r]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),exports[r+"s"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),exports[r+"eq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),exports[r+"seq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var math_noncomm=["atan2","pow"];!function(){for(var a=0;a<math_noncomm.length;++a){var r=math_noncomm[a];exports[r+"op"]=makeOp({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),exports[r+"ops"]=makeOp({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),exports[r+"opeq"]=makeOp({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),exports[r+"opseq"]=makeOp({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),exports.any=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),exports.all=compile({args:["array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),exports.sum=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),exports.prod=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),exports.norm2squared=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),exports.norm2=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),exports.norminf=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),exports.norm1=compile({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),exports.sup=compile({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.inf=compile({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.argmin=compile({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.argmax=compile({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.random=makeOp({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),exports.assign=makeOp({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),exports.assigns=makeOp({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),exports.equals=compile({args:["array","array"],pre:EmptyProc,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});
},{"cwise-compiler":1}],13:[function(require,module,exports){
"use strict";var ndarray=require("ndarray"),do_convert=require("./doConvert.js");module.exports=function(r,e){for(var a=[],n=r,t=1;Array.isArray(n);)a.push(n.length),t*=n.length,n=n[0];return 0===a.length?ndarray():(e||(e=ndarray(new Float64Array(t),a)),do_convert(e,r),e)};
},{"./doConvert.js":14,"ndarray":16}],14:[function(require,module,exports){
module.exports=require("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64});
},{"cwise-compiler":1}],15:[function(require,module,exports){
"use strict";var dup=require("dup"),do_unpack=require("cwise/lib/wrapper")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{var _inline_1_a,_inline_1_e=_inline_1_arg1_;for(_inline_1_a=0;_inline_1_a<_inline_1_arg2_.length-1;++_inline_1_a)_inline_1_e=_inline_1_e[_inline_1_arg2_[_inline_1_a]];_inline_1_e[_inline_1_arg2_[_inline_1_arg2_.length-1]]=_inline_1_arg0_}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_a","_inline_1_e"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"unpackCwise",blockSize:64});module.exports=function(_){var n=dup(_.shape);return do_unpack(_,n),n};
},{"cwise/lib/wrapper":6,"dup":7}],16:[function(require,module,exports){
function compare1st(t,r){return t[0]-r[0]}function order(){var t,r=this.stride,n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(r[t]),t];n.sort(compare1st);var e=new Array(n.length);for(t=0;t<e.length;++t)e[t]=n[t][1];return e}function compileConstructor(t,r){var n=["View",r,"d",t].join("");r<0&&(n="View_Nil"+t);var e="generic"===t;if(-1===r){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",i=new Function(o);return i()}if(0===r){var o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",i=new Function("TrivialArray",o);return i(CACHED_CONSTRUCTORS[t][0])}var o=["'use strict'"],a=iota(r),s=a.map(function(t){return"i"+t}),u="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),p=a.map(function(t){return"b"+t}).join(","),f=a.map(function(t){return"c"+t}).join(",");o.push("function "+n+"(a,"+p+","+f+",d){this.data=a","this.shape=["+p+"]","this.stride=["+f+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+r),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===r?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),r<4?(o.push("function "+n+"_order(){"),2===r?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===r&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+s.join(",")+",v){"),e?o.push("return this.data.set("+u+",v)}"):o.push("return this.data["+u+"]=v}"),o.push("proto.get=function "+n+"_get("+s.join(",")+"){"),e?o.push("return this.data.get("+u+")}"):o.push("return this.data["+u+"]}"),o.push("proto.index=function "+n+"_index(",s.join(),"){return "+u+"}"),o.push("proto.hi=function "+n+"_hi("+s.join(",")+"){return new "+n+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var c=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),h=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+n+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+h.join(","));for(var d=0;d<r;++d)o.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");o.push("return new "+n+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+s.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<r;++d)o.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");o.push("return new "+n+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");for(var y=new Array(r),b=new Array(r),d=0;d<r;++d)y[d]="a[i"+d+"]",b[d]="b[i"+d+"]";o.push("proto.transpose=function "+n+"_transpose("+s+"){"+s.map(function(t,r){return t+"=("+t+"===undefined?"+r+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+b.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+s+"){var a=[],b=[],c=this.offset");for(var d=0;d<r;++d)o.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var i=new Function("CTOR_LIST","ORDER",o.join("\n"));return i(CACHED_CONSTRUCTORS[t],order)}function arrayDType(t){if(isBuffer(t))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}function wrappedNDArrayCtor(t,r,n,e){if(void 0===t){var o=CACHED_CONSTRUCTORS.array[0];return o([])}"number"==typeof t&&(t=[t]),void 0===r&&(r=[t.length]);var i=r.length;if(void 0===n){n=new Array(i);for(var a=i-1,s=1;a>=0;--a)n[a]=s,s*=r[a]}if(void 0===e){e=0;for(var a=0;a<i;++a)n[a]<0&&(e-=(r[a]-1)*n[a])}for(var u=arrayDType(t),p=CACHED_CONSTRUCTORS[u];p.length<=i+1;)p.push(compileConstructor(u,p.length-1));var o=p[i+1];return o(t,r,n,e)}var iota=require("iota-array"),isBuffer=require("is-buffer"),hasTypedArrays="undefined"!=typeof Float64Array,CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};module.exports=wrappedNDArrayCtor;
},{"iota-array":10,"is-buffer":11}],17:[function(require,module,exports){
"use strict";function unique_pred(n,e){for(var u=1,t=n.length,i=n[0],r=n[0],o=1;o<t;++o)if(r=i,i=n[o],e(i,r)){if(o===u){u++;continue}n[u++]=i}return n.length=u,n}function unique_eq(n){for(var e=1,u=n.length,t=n[0],i=n[0],r=1;r<u;++r,i=t)if(i=t,(t=n[r])!==i){if(r===e){e++;continue}n[e++]=t}return n.length=e,n}function unique(n,e,u){return 0===n.length?n:e?(u||n.sort(e),unique_pred(n,e)):(u||n.sort(),unique_eq(n))}module.exports=unique;
},{}],18:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var r=[],a=!0,i=!1,n=void 0;try{for(var u,s=e[Symbol.iterator]();!(a=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);a=!0);}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_events=require("events"),_ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps),_ndarrayPack=require("ndarray-pack"),_ndarrayPack2=_interopRequireDefault(_ndarrayPack),_ndarrayUnpack=require("ndarray-unpack"),_ndarrayUnpack2=_interopRequireDefault(_ndarrayUnpack),_cwise=require("cwise"),_cwise2=_interopRequireDefault(_cwise),_randn=require("./randn"),_randn2=_interopRequireDefault(_randn),_pairwiseDistances=require("./pairwise-distances"),_pairwiseDistances2=_interopRequireDefault(_pairwiseDistances),_jointProbabilities=require("./joint-probabilities"),_jointProbabilities2=_interopRequireDefault(_jointProbabilities),_klDivergence=require("./kl-divergence"),_klDivergence2=_interopRequireDefault(_klDivergence),TSNE=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e=e||{},r.dim=e.dim||2,r.perplexity=e.perplexity||30,r.earlyExaggeration=e.earlyExaggeration||4,r.learningRate=e.learningRate||1e3,r.nIter=e.nIter||1e3,r.metric=e.metric||"euclidean",r.barneshut=e.barneshut||!1,r.inputData=null,r.outputEmbedding=null,r}return _inherits(t,e),_createClass(t,[{key:"init",value:function(e){e=e||{};var t=e.data||[],r=e.type||"dense";if("dense"===r)this.inputData=(0,_ndarrayPack2.default)(t);else{if("sparse"!==r)throw new Error("input data type must be dense or sparse");for(var a=[],i=1,n=0;n<t[0].length;n++)!function(e){var r=Math.max.apply(null,t.map(function(t){return t[e]}))+1;a.push(r),i*=r}(n);this.inputData=(0,_ndarray2.default)(new Float64Array(i),a);var u=!0,s=!1,o=void 0;try{for(var l,d=t[Symbol.iterator]();!(u=(l=d.next()).done);u=!0){var p,c=l.value;(p=this.inputData).set.apply(p,_toConsumableArray(c).concat([1]))}}catch(e){s=!0,o=e}finally{try{!u&&d.return&&d.return()}finally{if(s)throw o}}}this.outputEmbedding=(0,_randn2.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,_pairwiseDistances2.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,_jointProbabilities2.default)(this.distances,this.perplexity);var e=Number.MAX_VALUE,t=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),_ndarrayOps2.default.mulseq(this.P,this.earlyExaggeration);var r=this._gradDesc(t,50,.5,0,0),a=_slicedToArray(r,2);e=a[0],t=a[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var i=this._gradDesc(t+1,100,.8,0,0),n=_slicedToArray(i,2);e=n[0],t=n[1],this.emit("progressStatus","Final optimization with momentum 0.8"),_ndarrayOps2.default.divseq(this.P,this.earlyExaggeration);var u=this._gradDesc(t+1,this.nIter,.8,1e-6,1e-6),s=_slicedToArray(u,2);return e=s[0],t=s[1],this.emit("progressStatus","Optimization end"),[e,t]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_randn2.default)(this.inputData.shape[0],this.dim);var e=this.run(),t=_slicedToArray(e,2);return[t[0],t[1]]}},{key:"getOutput",value:function(){return(0,_ndarrayUnpack2.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var e=(0,_ndarray2.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),t=(0,_ndarray2.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),r=0;r<this.outputEmbedding.shape[1];r++){var a=_ndarrayOps2.default.sup(_ndarrayOps2.default.abs(t,this.outputEmbedding.pick(null,r)));_ndarrayOps2.default.divs(e.pick(null,r),this.outputEmbedding.pick(null,r),a)}return(0,_ndarrayUnpack2.default)(e)}},{key:"_gradDesc",value:function(e,t,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-6,n=(0,_ndarray2.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),u=new Float64Array(this.outputEmbedding.size),s=0;s<u.length;s++)u[s]=1;var o=(0,_ndarray2.default)(u,this.outputEmbedding.shape),l=Number.MAX_VALUE,d=Number.MAX_VALUE,p=0,c=(0,_cwise2.default)({args:["array"],pre:function(e){this.sum=0},body:function(e){this.sum+=e*e},post:function(e){return Math.sqrt(this.sum)}}),f=(0,_cwise2.default)({args:["array","array","array"],body:function(e,t,r){t*r>=0?e+=.05:e*=.95,e=Math.max(e,.01)}}),y=void 0;for(y=e;y<t;y++){var h=(0,_klDivergence2.default)(this.outputEmbedding,this.P,this.alpha),_=_slicedToArray(h,2),m=_[0],b=_[1],g=Math.abs(m-l);l=m;var v=c(b);if(this.emit("progressIter",[y,l,v]),l<d)d=l,p=y;else if(y-p>30)break;if(a>=v)break;if(i>=g)break;f(o,n,b),_ndarrayOps2.default.muleq(b,o);var w=(0,_ndarray2.default)(new Float64Array(b.size),b.shape);_ndarrayOps2.default.muls(w,b,this.learningRate),_ndarrayOps2.default.mulseq(n,r),_ndarrayOps2.default.subeq(n,w),_ndarrayOps2.default.addeq(this.outputEmbedding,n),this.emit("progressData",this.getOutputScaled())}return[l,y]}}]),t}(_events.EventEmitter);exports.default=TSNE,module.exports=exports.default;
},{"./joint-probabilities":19,"./kl-divergence":20,"./pairwise-distances":21,"./randn":22,"cwise":5,"events":9,"ndarray":16,"ndarray-ops":12,"ndarray-pack":13,"ndarray-unpack":15}],19:[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,a){for(var e=r.shape[0],t=(0,_ndarray2.default)(new Float64Array(e*e),[e,e]),d=(0,_ndarray2.default)(new Float64Array(e*e),[e,e]),o=void 0,u=void 0,n=1/0,s=0,_=Math.log(a),f=void 0,i=void 0,l=void 0,p=void 0,y=0;y<e;y++){o=1,u=-1/0,n=1/0;for(var E=0;E<100;E++){for(var O=0;O<e;O++)t.set(y,O,Math.exp(-r.get(y,O)*o));t.set(y,y,0),l=0;for(var v=0;v<e;v++)l+=t.get(y,v);0==l&&(l=EPSILON_DBL),p=0;for(var L=0;L<e;L++)t.set(y,L,t.get(y,L)/l),p+=r.get(y,L)*t.get(y,L);if(i=Math.log(l)+o*p,f=i-_,Math.abs(f)<=PERPLEXITY_TOLERANCE)break;f>0?(u=o,n==1/0?o*=2:o=(o+n)/2):(n=o,u==-1/0?o/=2:o=(o+u)/2)}s+=o}_ndarrayOps2.default.add(d,t,t.transpose(1,0));var N=Math.max(_ndarrayOps2.default.sum(d),MACHINE_EPSILON);return _ndarrayOps2.default.divseq(d,N),_ndarrayOps2.default.maxseq(d,MACHINE_EPSILON),d};var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps),EPSILON_DBL=1e-7,MACHINE_EPSILON=Number.EPSILON||2.220446049250313e-16,PERPLEXITY_TOLERANCE=1e-5;module.exports=exports.default;
},{"ndarray":16,"ndarray-ops":12}],20:[function(require,module,exports){
"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(a,r,e){var d=a.shape[0],s=a.shape[1],t=(0,_ndarray2.default)(new Float64Array(d*d),[d,d]),u=(0,_pairwiseDistances2.default)(a,"euclidean");square(u);var n=(e+1)/-2;_ndarrayOps2.default.powseq(_ndarrayOps2.default.divseq(_ndarrayOps2.default.addseq(u,1),e),n);for(var l=0;l<d;l++)u.set(l,l,0);var _=Math.max(_ndarrayOps2.default.sum(u),MACHINE_EPSILON);_ndarrayOps2.default.divs(t,u,_),_ndarrayOps2.default.maxseq(t,MACHINE_EPSILON);var i=(0,_ndarray2.default)(new Float64Array(d*d),[d,d]),p=(0,_ndarray2.default)(new Float64Array(d*d),[d,d]);_ndarrayOps2.default.div(i,r,t),_ndarrayOps2.default.logeq(i),_ndarrayOps2.default.assign(p,r);var f=_ndarrayOps2.default.sum(_ndarrayOps2.default.muleq(i,p)),y=(0,_ndarray2.default)(new Float64Array(a.size),a.shape),o=(0,_ndarray2.default)(new Float64Array(d*d),[d,d]);_ndarrayOps2.default.sub(o,r,t),_ndarrayOps2.default.muleq(o,u);for(var O=0;O<d;O++)for(var q=0;q<s;q++){var c=(0,_ndarray2.default)(new Float64Array(a.shape[0]),[a.shape[0]]);_ndarrayOps2.default.assign(c,a.pick(null,q)),_ndarrayOps2.default.addseq(_ndarrayOps2.default.negeq(c),a.get(O,q)),_ndarrayOps2.default.muleq(c,o.pick(O,null)),y.set(O,q,_ndarrayOps2.default.sum(c))}var w=2*(e+1)/e;return _ndarrayOps2.default.mulseq(y,w),[f,y]};var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_ndarrayOps=require("ndarray-ops"),_ndarrayOps2=_interopRequireDefault(_ndarrayOps),_cwise=require("cwise"),_cwise2=_interopRequireDefault(_cwise),_pairwiseDistances=require("./pairwise-distances"),_pairwiseDistances2=_interopRequireDefault(_pairwiseDistances),MACHINE_EPSILON=Number.EPSILON||2.220446049250313e-16,square=(0,_cwise2.default)({args:["array"],body:function(a){a*=a}});module.exports=exports.default;
},{"./pairwise-distances":21,"cwise":5,"ndarray":16,"ndarray-ops":12}],21:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,r){var a=t.shape[0],e=(0,_ndarray2.default)(new Float64Array(a*a),[a,a]);switch(r){case"euclidean":for(var i=0;i<a;i++)for(var s=i+1;s<a;s++){var n=euclidean(t.pick(i,null),t.pick(s,null));e.set(i,s,n),e.set(s,i,n)}break;case"manhattan":for(var u=0;u<a;u++)for(var c=u+1;c<a;c++){var o=manhattan(t.pick(u,null),t.pick(c,null));e.set(u,c,o),e.set(c,u,o)}break;case"jaccard":for(var f=0;f<a;f++)for(var h=f+1;h<a;h++){var l=jaccard(t.pick(f,null),t.pick(h,null));e.set(f,h,l),e.set(h,f,l)}break;case"dice":for(var d=0;d<a;d++)for(var p=d+1;p<a;p++){var y=dice(t.pick(d,null),t.pick(p,null));e.set(d,p,y),e.set(p,d,y)}}return e};var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray),_cwise=require("cwise"),_cwise2=_interopRequireDefault(_cwise),euclidean=(0,_cwise2.default)({args:["array","array"],pre:function(t,r){this.sum=0},body:function(t,r){var a=t-r;this.sum+=a*a},post:function(t,r){return Math.sqrt(this.sum)}}),manhattan=(0,_cwise2.default)({args:["array","array"],pre:function(t,r){this.sum=0},body:function(t,r){this.sum+=Math.abs(t-r)},post:function(t,r){return this.sum}}),jaccard=(0,_cwise2.default)({args:["array","array"],pre:function(t,r){this.tf=0,this.tt=0},body:function(t,r){var a=Math.round(t),e=Math.round(r);this.tf+=+(a!=e),this.tt+=+(1==a&&1==e)},post:function(t,r){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),dice=(0,_cwise2.default)({args:["array","array"],pre:function(t,r){this.tf=0,this.tt=0},body:function(t,r){var a=Math.round(t),e=Math.round(r);this.tf+=+(a!=e),this.tt+=+(1==a&&1==e)},post:function(t,r){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});module.exports=exports.default;
},{"cwise":5,"ndarray":16}],22:[function(require,module,exports){
"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function gaussRandom(){var r=2*Math.random()-1,e=2*Math.random()-1,a=r*r+e*e;return 0==a||a>1?gaussRandom():r*Math.sqrt(-2*Math.log(a)/a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r,e){for(var a=new Float64Array(r*e),t=0;t<a.length;t++)a[t]=1e-4*gaussRandom();return(0,_ndarray2.default)(a,[r,e])};var _ndarray=require("ndarray"),_ndarray2=_interopRequireDefault(_ndarray);module.exports=exports.default;
},{"ndarray":16}]},{},[18])(18)
});
